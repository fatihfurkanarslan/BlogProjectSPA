{"ast":null,"code":"import _defineProperty from \"C:/Users/Fatih Furkan Arslan/Desktop/Github/BlogProject-SPA/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { TagService } from './../../services/tag.service';\nimport { Router } from '@angular/router';\nimport axios from 'axios';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { PhotobarComponent } from './../../photobar/photobar.component';\nimport { ErrorphotobarComponent } from './../../errorphotobar/errorphotobar.component';\nimport { NoteService } from 'src/app/services/note.service';\nimport { Note } from 'src/app/models/note';\nimport { TagToInsert } from './../../models/tagToInsert';\nimport { CategoryService } from 'src/app/services/category.service';\nimport { HttpClient } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../services/tag.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"src/app/services/note.service\";\nimport * as i5 from \"@angular/common/http\";\nimport * as i6 from \"src/app/services/category.service\";\nfunction CreatetagsComponent_mat_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cat_r3.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", cat_r3 == null ? null : cat_r3.categoryname, \" \");\n  }\n}\nexport let CreatetagsComponent = /*#__PURE__*/(() => {\n  class CreatetagsComponent {\n    constructor(tagService, router, _snackBar, noteService, httpClient, categoryService) {\n      _defineProperty(this, \"tagService\", void 0);\n      _defineProperty(this, \"router\", void 0);\n      _defineProperty(this, \"_snackBar\", void 0);\n      _defineProperty(this, \"noteService\", void 0);\n      _defineProperty(this, \"httpClient\", void 0);\n      _defineProperty(this, \"categoryService\", void 0);\n      _defineProperty(this, \"categories\", []);\n      _defineProperty(this, \"selectedOption\", {});\n      _defineProperty(this, \"tagList\", []);\n      _defineProperty(this, \"noteId\", void 0);\n      _defineProperty(this, \"ipAddress\", void 0);\n      _defineProperty(this, \"tag\", new TagToInsert());\n      _defineProperty(this, \"selectedFile\", null);\n      _defineProperty(this, \"durationInSeconds\", 3);\n      _defineProperty(this, \"data\", new FormData());\n      _defineProperty(this, \"photoUrl\", void 0);\n      _defineProperty(this, \"note\", void 0);\n      this.tagService = tagService;\n      this.router = router;\n      this._snackBar = _snackBar;\n      this.noteService = noteService;\n      this.httpClient = httpClient;\n      this.categoryService = categoryService;\n      this.note = new Note();\n      //profileService.getChangeInPhoto.subscribe(photoUrl => this.changePhoto(photoUrl));\n      this.photoUrl = 'http://cloudrangers.com/blog/wp-content/uploads/2017/08/blog_default.png';\n    }\n    changePhoto(_photoUrl) {\n      this.photoUrl = _photoUrl;\n    }\n    ngOnInit() {\n      // tslint:disable-next-line:prefer-const\n      this.categoryService.getCategories().subscribe(categoryList => {\n        this.categories = categoryList;\n      }, error => {\n        console.log('category service failed');\n      });\n    }\n    onSubmit() {\n      this.noteId = localStorage.getItem('editNoteId');\n      this.tag.noteId = +this.noteId;\n      this.tag.tags = this.tagList;\n      console.log(\"editnoteid \" + this.noteId);\n      this.tagService.insertTag(this.tag).subscribe(result => {\n        console.log('basarılı bir tag ekleme');\n        // this.router.navigate(['/usernotes']);\n      }, error => {\n        console.log('basarısız bir tag ekleme');\n      });\n      //console.log(\"User id \" + this.noteId)\n      this.note.mainPhotourl = this.photoUrl;\n      this.note.id = +this.noteId;\n      this.note.categoryId = this.selectedOption;\n      this.noteService.updateNoteImage(this.note).subscribe(result => {\n        this.router.navigate(['/usernotes']);\n      }, error => {\n        console.log(error);\n      });\n    }\n    onFileSelected(event) {\n      this.selectedFile = event.target.files[0];\n      // console.log(this.selectedFile);\n      this.data.append('File', this.selectedFile);\n      axios.post('https://localhost:44369/api/photo/insertphotonote', this.data, {\n        headers: {\n          'accept': 'application/json',\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(res => {\n        this.photoUrl = res.data;\n        this.openSnackBar();\n      }).catch(err => {\n        this.errorPhotoBar();\n      });\n      // this.photoService.insertPhoto(this.data).subscribe(result => {\n      //   this.photoUrl = result;\n      //   console.log('ffjslk   ' + this.photoUrl);\n      // }, error => {\n      //   console.log('photo yukleme basarısız');\n      // });\n    }\n\n    openSnackBar() {\n      this._snackBar.openFromComponent(PhotobarComponent, {\n        duration: this.durationInSeconds * 1000,\n        verticalPosition: 'top'\n      });\n    }\n    errorPhotoBar() {\n      this._snackBar.openFromComponent(ErrorphotobarComponent, {\n        duration: this.durationInSeconds * 1000,\n        verticalPosition: 'top'\n      });\n    }\n  }\n  _defineProperty(CreatetagsComponent, \"\\u0275fac\", function CreatetagsComponent_Factory(t) {\n    return new (t || CreatetagsComponent)(i0.ɵɵdirectiveInject(i1.TagService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MatSnackBar), i0.ɵɵdirectiveInject(i4.NoteService), i0.ɵɵdirectiveInject(i5.HttpClient), i0.ɵɵdirectiveInject(i6.CategoryService));\n  });\n  _defineProperty(CreatetagsComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreatetagsComponent,\n    selectors: [[\"app-createtags\"]],\n    decls: 31,\n    vars: 8,\n    consts: [[\"id\", \"editForm\", 1, \"example-container\"], [\"editForm\", \"ngForm\"], [1, \"form-group\"], [2, \"width\", \"100%\"], [2, \"width\", \"100%\", 3, \"value\", \"valueChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"example-full-width\"], [\"matInput\", \"\", \"required\", \"\", \"placeholder\", \"Title\", \"maxlength\", \"100\", \"name\", \"title\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"required\", \"\", \"placeholder\", \"Description\", \"maxlength\", \"150\", \"name\", \"description\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"tagList\", 3, \"ngModel\", \"modelAsStrings\", \"maxItems\", \"ngModelChange\"], [1, \"example-card\"], [\"mat-card-image\", \"\", \"alt\", \"Photo of a Shiba Inu\", 3, \"src\"], [\"mat-raised-button\", \"\", 1, \"button\", 3, \"click\"], [1, \"material-icons\"], [\"type\", \"file\", 2, \"display\", \"none\", 3, \"change\"], [\"fileInput\", \"\"], [1, \"row\"], [\"aria-label\", \"Show an example snack-bar\", \"mat-raised-button\", \"\", 3, \"click\"], [3, \"value\"]],\n    template: function CreatetagsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r4 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"form\", 0, 1)(2, \"div\", 2)(3, \"mat-form-field\", 3)(4, \"mat-label\");\n        i0.ɵɵtext(5, \"Choose The Category\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"mat-select\", 4);\n        i0.ɵɵlistener(\"valueChange\", function CreatetagsComponent_Template_mat_select_valueChange_6_listener($event) {\n          return ctx.selectedOption = $event;\n        });\n        i0.ɵɵtemplate(7, CreatetagsComponent_mat_option_7_Template, 2, 2, \"mat-option\", 5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(8, \"mat-form-field\", 6)(9, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function CreatetagsComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.note.title = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"mat-form-field\", 6)(11, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function CreatetagsComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.note.description = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"p\");\n        i0.ɵɵtext(13, \"Please insert related tag about your article \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"tag-input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function CreatetagsComponent_Template_tag_input_ngModelChange_14_listener($event) {\n          return ctx.tagList = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"br\");\n        i0.ɵɵelementStart(16, \"mat-card\", 10);\n        i0.ɵɵelement(17, \"img\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"br\");\n        i0.ɵɵelementStart(19, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function CreatetagsComponent_Template_button_click_19_listener() {\n          i0.ɵɵrestoreView(_r4);\n          const _r2 = i0.ɵɵreference(25);\n          return i0.ɵɵresetView(_r2.click());\n        });\n        i0.ɵɵelementStart(20, \"i\", 13);\n        i0.ɵɵtext(21, \"add\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"span\");\n        i0.ɵɵtext(23, \"Select A Photo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"input\", 14, 15);\n        i0.ɵɵlistener(\"change\", function CreatetagsComponent_Template_input_change_24_listener($event) {\n          return ctx.onFileSelected($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(26, \"br\");\n        i0.ɵɵelementStart(27, \"div\", 16);\n        i0.ɵɵtext(28, \" \\u00A0\\u00A0\\u00A0 \");\n        i0.ɵɵelementStart(29, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function CreatetagsComponent_Template_button_click_29_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(30, \"Post \");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"value\", ctx.selectedOption);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.note.title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.note.description);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.tagList)(\"modelAsStrings\", true)(\"maxItems\", 5);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.photoUrl, i0.ɵɵsanitizeUrl);\n      }\n    },\n    styles: [\"p[_ngcontent-%COMP%]{text-align:center}.example-card[_ngcontent-%COMP%]{max-width:50%;margin-left:25%}button[_ngcontent-%COMP%]{margin:auto;display:block}.example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}\"]\n  }));\n  return CreatetagsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}