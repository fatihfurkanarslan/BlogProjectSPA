{"ast":null,"code":"import _defineProperty from \"C:/Users/Fatih Furkan Arslan/Desktop/Github/BlogProject-SPA/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { EventEmitter } from '@angular/core';\nimport { FormGroup, FormControl } from '@angular/forms';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { HttpClient } from '@angular/common/http';\nimport { ProfileService } from '../services/profile.service';\nimport { Router } from '@angular/router';\nimport { NavComponent } from './../nav/nav.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"../services/profile.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"./../nav/nav.component\";\nfunction LoginComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nconst _c0 = function () {\n  return [\"/register\"];\n};\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(authService, http, profileService, router, navbar) {\n      _defineProperty(this, \"authService\", void 0);\n      _defineProperty(this, \"http\", void 0);\n      _defineProperty(this, \"profileService\", void 0);\n      _defineProperty(this, \"router\", void 0);\n      _defineProperty(this, \"navbar\", void 0);\n      _defineProperty(this, \"form\", new FormGroup({\n        username: new FormControl(''),\n        password: new FormControl('')\n      }));\n      _defineProperty(this, \"model\", {});\n      _defineProperty(this, \"user\", void 0);\n      _defineProperty(this, \"error\", '');\n      _defineProperty(this, \"fireIsLoggedIn\", new EventEmitter());\n      this.authService = authService;\n      this.http = http;\n      this.profileService = profileService;\n      this.router = router;\n      this.navbar = navbar;\n    }\n    ngOnInit() {\n      document.body.classList.add('imageback');\n    }\n    ngOnDestroy() {\n      document.body.classList.remove('imageback');\n    }\n    login() {\n      this.authService.login(this.model).subscribe(next => {\n        // this.decodedToken = this._jwtHelperService.decodeToken(user.tokenString);\n        // tslint:disable-next-line:prefer-const\n        // let userId = this.authService.decodedToken.nameid;\n        // this.profileService.getUser(userId).subscribe((result: User) => {\n        //   this.user = result;\n        //   console.log('resim ' + this.user.photoUrl);\n        //   // this.navbar.ngOnInit();\n        // });\n        this.router.navigate(['/home']);\n        //       this.router.navigateByUrl('/nav', {skipLocationChange: true}).then(() =>\n        // this.router.navigate(['/home']));\n        //  this.router.navigateByUrl('/', {state: {redirect: btnValue}});\n      }, error => {\n        if (error.status === 500) {\n          this.error = 'Wrong username or password please try again!';\n        }\n      });\n    }\n    loggedIn() {\n      const token = localStorage.getItem('token');\n      // tslint:disable-next-line:prefer-const\n      return !!token;\n    }\n  }\n  _defineProperty(LoginComponent, \"\\u0275fac\", function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.ProfileService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.NavComponent));\n  });\n  _defineProperty(LoginComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    outputs: {\n      fireIsLoggedIn: \"fireIsLoggedIn\"\n    },\n    decls: 20,\n    vars: 6,\n    consts: [[1, \"image\"], [\"style\", \"color:#d21f3c\", \"matBadge\", \"4\", \"matBadgeOverlap\", \"false\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"matInput\", \"\", \"placeholder\", \"Username\", \"formControlName\", \"username\", \"required\", \"\", \"name\", \"username\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"matInput\", \"\", \"placeholder\", \"Password\", \"formControlName\", \"password\", \"required\", \"\", \"name\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [1, \"button\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", \"mat-button\", \"\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", \"routerLinkActive\", \"active\", 3, \"routerLink\"], [\"matBadge\", \"4\", \"matBadgeOverlap\", \"false\", 2, \"color\", \"#d21f3c\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-card\", 0)(1, \"mat-card-title\");\n        i0.ɵɵtext(2, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"p\");\n        i0.ɵɵtemplate(4, LoginComponent_span_4_Template, 2, 1, \"span\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵelementStart(6, \"mat-card-content\")(7, \"form\", 2);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_7_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵelementStart(8, \"p\")(9, \"mat-form-field\")(10, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_10_listener($event) {\n          return ctx.model.username = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(11, \"p\")(12, \"mat-form-field\")(13, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_13_listener($event) {\n          return ctx.model.password = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(14, \"div\", 5)(15, \"button\", 6);\n        i0.ɵɵtext(16, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"hr\");\n        i0.ɵɵelementStart(18, \"button\", 7);\n        i0.ɵɵtext(19, \"Register\");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.model.username);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.model.password);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(5, _c0));\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{display:flex;justify-content:center;margin:100px 0}.mat-form-field[_ngcontent-%COMP%]{width:300px;min-width:300px}mat-card-title[_ngcontent-%COMP%], mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center}.error[_ngcontent-%COMP%]{padding:16px;width:300px;color:#fff;background-color:red}.button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.mat-card[_ngcontent-%COMP%]{opacity:.8}\"]\n  }));\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}