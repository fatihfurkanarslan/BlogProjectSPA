{"ast":null,"code":"import _defineProperty from \"C:/Users/Fatih Furkan Arslan/Desktop/Github/BlogProject-SPA/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { ChangeDetectorRef } from '@angular/core';\nimport { NoteService } from './../../services/note.service';\nimport { AuthService } from './../../services/auth.service';\nimport { Router } from '@angular/router';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport { DeleteDialogComponent } from './../DeleteDialog/DeleteDialog.component';\nimport { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../services/note.service\";\nimport * as i2 from \"./../../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/material/dialog\";\nfunction UsernotesComponent_th_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \" Name \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/note\", a1];\n};\nfunction UsernotesComponent_td_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"slice\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r20 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(6, _c0, element_r20 == null ? null : element_r20.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(2, 2, element_r20 == null ? null : element_r20.title, 0, 15), \"..\");\n  }\n}\nfunction UsernotesComponent_th_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \" OnModified \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsernotesComponent_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"slice\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(2, 1, element_r21 == null ? null : element_r21.onModified, 0, 10), \" \");\n  }\n}\nfunction UsernotesComponent_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 12);\n  }\n}\nfunction UsernotesComponent_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 14)(1, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function UsernotesComponent_td_11_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r24);\n      const element_r22 = restoredCtx.$implicit;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.openDialog(element_r22.id));\n    });\n    i0.ɵɵtext(2, \"Delete \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UsernotesComponent_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 12);\n  }\n}\nfunction UsernotesComponent_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 14)(1, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function UsernotesComponent_td_14_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const element_r25 = restoredCtx.$implicit;\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.editNote(element_r25));\n    });\n    i0.ɵɵtext(2, \"Edit\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UsernotesComponent_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 16);\n  }\n}\nfunction UsernotesComponent_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 17);\n  }\n}\nfunction UsernotesComponent_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \" Name \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsernotesComponent_td_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r29 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c0, element_r29 == null ? null : element_r29.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r29.title, \" \");\n  }\n}\nfunction UsernotesComponent_th_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1, \" OnModified \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsernotesComponent_td_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"slice\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r30 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(2, 1, element_r30.onModified, 0, 10), \" \");\n  }\n}\nfunction UsernotesComponent_th_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 12);\n  }\n}\nfunction UsernotesComponent_td_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 14)(1, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function UsernotesComponent_td_27_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r33);\n      const element_r31 = restoredCtx.$implicit;\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.openDialog(element_r31.id));\n    });\n    i0.ɵɵtext(2, \"Delete \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UsernotesComponent_th_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 12);\n  }\n}\nfunction UsernotesComponent_td_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 14)(1, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function UsernotesComponent_td_30_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r36);\n      const element_r34 = restoredCtx.$implicit;\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.editNote(element_r34));\n    });\n    i0.ɵɵtext(2, \"Edit\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UsernotesComponent_tr_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 16);\n  }\n}\nfunction UsernotesComponent_tr_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 17);\n  }\n}\nexport let UsernotesComponent = /*#__PURE__*/(() => {\n  class UsernotesComponent {\n    constructor(noteService, authService, router, dialog, changeDetectRefs) {\n      _defineProperty(this, \"noteService\", void 0);\n      _defineProperty(this, \"authService\", void 0);\n      _defineProperty(this, \"router\", void 0);\n      _defineProperty(this, \"dialog\", void 0);\n      _defineProperty(this, \"changeDetectRefs\", void 0);\n      _defineProperty(this, \"notes\", []);\n      _defineProperty(this, \"userId\", void 0);\n      _defineProperty(this, \"draftNotes\", void 0);\n      _defineProperty(this, \"realNotes\", void 0);\n      _defineProperty(this, \"displayedColumns\", ['title', 'onModified', 'delete', 'edit']);\n      _defineProperty(this, \"dataSrc\", void 0);\n      _defineProperty(this, \"data\", void 0);\n      this.noteService = noteService;\n      this.authService = authService;\n      this.router = router;\n      this.dialog = dialog;\n      this.changeDetectRefs = changeDetectRefs;\n    }\n    ngOnInit() {\n      this.userId = this.authService.decodedToken.nameid;\n      this.noteService.getDraftNotes(this.userId).subscribe(result => {\n        this.draftNotes = new MatTableDataSource(result);\n        this.realNotes = new MatTableDataSource(result);\n        console.log(\" Im in usernotes \");\n        this.draftNotes.filterPredicate = (data, filter) => {\n          return data.isDraft === filter;\n        };\n        this.draftNotes.filter = true;\n        this.realNotes.filterPredicate = (data, filter) => {\n          return data.isDraft !== filter;\n        };\n        this.realNotes.filter = true;\n        // this.dataSrc = new MatTableDataSource(result);\n        //   result.forEach(eachObj => {\n        //     if (eachObj.isDraft === true){\n        //         this.draftNotes.push(eachObj);\n        //     }\n        //     if (eachObj.isDraft === false){\n        //       this.realNotes.push(eachObj);\n        //     }\n        // });\n        // this.dataSrc = result;\n        result.forEach(x => {\n          if (x.title == null) {\n            //regex e bak       \n            //x.text.replace(/(<p>)|(</p>)|(<header>)|(</header>)/g/, '');\n            x.title = x.text;\n          }\n        });\n        this.notes = result;\n      }, error => {\n        console.log('getdrafts methods failed');\n      });\n    }\n    openDialog(id) {\n      const dialogConfig = new MatDialogConfig();\n      dialogConfig.disableClose = true;\n      dialogConfig.autoFocus = true;\n      const dialogRef = this.dialog.open(DeleteDialogComponent, dialogConfig);\n      dialogRef.afterClosed().subscribe(result => {\n        this.data = result;\n        if (this.data === true) {\n          this.deleteNote(id);\n        }\n      });\n    }\n    deleteNote(noteId) {\n      this.noteService.deleteNote(noteId).subscribe(response => {\n        console.log('basarılı');\n        this.refresh();\n      });\n      // this.notes = this.notes.filter(item => item.id !== noteId);\n      // console.log('filter');\n    }\n\n    editNote(note) {\n      localStorage.removeItem('editNoteId');\n      localStorage.setItem('editNoteId', note.id.toString());\n      this.router.navigate(['/editnote']);\n    }\n    refresh() {\n      this.noteService.getDraftNotes(this.userId).subscribe(result => {\n        this.draftNotes = new MatTableDataSource(result);\n        this.realNotes = new MatTableDataSource(result);\n        this.draftNotes.filterPredicate = (data, filter) => {\n          return data.isDraft === filter;\n        };\n        this.draftNotes.filter = true;\n        this.realNotes.filterPredicate = (data, filter) => {\n          return data.isDraft !== filter;\n        };\n        this.realNotes.filter = true;\n      }, error => {\n        console.log('getdrafts methods failed');\n      });\n    }\n  }\n  _defineProperty(UsernotesComponent, \"\\u0275fac\", function UsernotesComponent_Factory(t) {\n    return new (t || UsernotesComponent)(i0.ɵɵdirectiveInject(i1.NoteService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.MatDialog), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  });\n  _defineProperty(UsernotesComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UsernotesComponent,\n    selectors: [[\"app-usernotes\"]],\n    decls: 33,\n    vars: 6,\n    consts: [[\"label\", \"Draft\"], [\"mat-table\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"title\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 3, \"routerLink\", 4, \"matCellDef\"], [\"matColumnDef\", \"onModified\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"delete\"], [\"matColumnDef\", \"edit\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"label\", \"Posts\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\", 3, \"routerLink\"], [\"mat-cell\", \"\"], [\"mat-raised-button\", \"\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function UsernotesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-tab-group\")(1, \"mat-tab\", 0)(2, \"table\", 1);\n        i0.ɵɵelementContainerStart(3, 2);\n        i0.ɵɵtemplate(4, UsernotesComponent_th_4_Template, 2, 0, \"th\", 3);\n        i0.ɵɵtemplate(5, UsernotesComponent_td_5_Template, 3, 8, \"td\", 4);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(6, 5);\n        i0.ɵɵtemplate(7, UsernotesComponent_th_7_Template, 2, 0, \"th\", 3);\n        i0.ɵɵtemplate(8, UsernotesComponent_td_8_Template, 3, 5, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(9, 7);\n        i0.ɵɵtemplate(10, UsernotesComponent_th_10_Template, 1, 0, \"th\", 3);\n        i0.ɵɵtemplate(11, UsernotesComponent_td_11_Template, 3, 0, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(12, 8);\n        i0.ɵɵtemplate(13, UsernotesComponent_th_13_Template, 1, 0, \"th\", 3);\n        i0.ɵɵtemplate(14, UsernotesComponent_td_14_Template, 3, 0, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(15, UsernotesComponent_tr_15_Template, 1, 0, \"tr\", 9);\n        i0.ɵɵtemplate(16, UsernotesComponent_tr_16_Template, 1, 0, \"tr\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"mat-tab\", 11)(18, \"table\", 1);\n        i0.ɵɵelementContainerStart(19, 2);\n        i0.ɵɵtemplate(20, UsernotesComponent_th_20_Template, 2, 0, \"th\", 3);\n        i0.ɵɵtemplate(21, UsernotesComponent_td_21_Template, 2, 4, \"td\", 4);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(22, 5);\n        i0.ɵɵtemplate(23, UsernotesComponent_th_23_Template, 2, 0, \"th\", 3);\n        i0.ɵɵtemplate(24, UsernotesComponent_td_24_Template, 3, 5, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(25, 7);\n        i0.ɵɵtemplate(26, UsernotesComponent_th_26_Template, 1, 0, \"th\", 3);\n        i0.ɵɵtemplate(27, UsernotesComponent_td_27_Template, 3, 0, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(28, 8);\n        i0.ɵɵtemplate(29, UsernotesComponent_th_29_Template, 1, 0, \"th\", 3);\n        i0.ɵɵtemplate(30, UsernotesComponent_td_30_Template, 3, 0, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(31, UsernotesComponent_tr_31_Template, 1, 0, \"tr\", 9);\n        i0.ɵɵtemplate(32, UsernotesComponent_tr_32_Template, 1, 0, \"tr\", 10);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataSource\", ctx.draftNotes);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataSource\", ctx.realNotes);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n      }\n    },\n    styles: [\"table[_ngcontent-%COMP%]{width:100%}\"]\n  }));\n  return UsernotesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}