{"ast":null,"code":"import _defineProperty from \"C:/Users/Fatih Furkan Arslan/Desktop/Github/BlogProject-SPA/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { Router } from '@angular/router';\nimport { NoteService } from 'src/app/services/note.service';\nimport { ProfileService } from './../../services/profile.service';\nimport { FollowService } from './../../services/follow.service';\nimport jwt_decode from 'jwt-decode';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/note.service\";\nimport * as i3 from \"./../../services/profile.service\";\nimport * as i4 from \"./../../services/follow.service\";\nconst _c0 = function (a1) {\n  return [\"/note\", a1];\n};\nconst _c1 = function (a1) {\n  return [\"/notesbyuser\", a1];\n};\nfunction SearchednotesComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelement(1, \"br\")(2, \"br\");\n    i0.ɵɵelementStart(3, \"div\", 12);\n    i0.ɵɵelement(4, \"img\", 13);\n    i0.ɵɵelementStart(5, \"a\");\n    i0.ɵɵelement(6, \"div\", 14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 15);\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"h6\", 16)(10, \"strong\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 17)(13, \"p\", 18);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 19)(16, \"div\", 20);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\");\n    i0.ɵɵtext(19);\n    i0.ɵɵpipe(20, \"date\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const note_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"src\", note_r2.mainPhotourl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", note_r2 == null ? null : note_r2.title);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(13, _c0, note_r2.id));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(15, _c0, note_r2.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(note_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(17, _c0, note_r2.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(note_r2.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(19, _c1, note_r2.userId));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", note_r2.onModifiedUsername, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(20, 10, note_r2.onModified, \"mediumDate\"), \" \");\n  }\n}\nfunction SearchednotesComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelement(1, \"br\")(2, \"br\");\n    i0.ɵɵelementStart(3, \"div\", 12);\n    i0.ɵɵelement(4, \"img\", 21);\n    i0.ɵɵelementStart(5, \"a\");\n    i0.ɵɵelement(6, \"div\", 14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 15);\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 19)(12, \"div\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function SearchednotesComponent_div_13_Template_button_click_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const person_r3 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.FollowWriter($event.target, person_r3.id));\n    });\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const person_r3 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"src\", person_r3.photoUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", person_r3.username);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(person_r3.username);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(person_r3 == null ? null : person_r3.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", person_r3.followInfo, \"\");\n  }\n}\nexport let SearchednotesComponent = /*#__PURE__*/(() => {\n  class SearchednotesComponent {\n    constructor(router, noteService, profileService, followService) {\n      _defineProperty(this, \"router\", void 0);\n      _defineProperty(this, \"noteService\", void 0);\n      _defineProperty(this, \"profileService\", void 0);\n      _defineProperty(this, \"followService\", void 0);\n      _defineProperty(this, \"jwtHelper\", new JwtHelperService());\n      _defineProperty(this, \"searchKeyword\", void 0);\n      _defineProperty(this, \"searchedTag\", void 0);\n      _defineProperty(this, \"searchedPeople\", void 0);\n      _defineProperty(this, \"selectedTabIndex\", void 0);\n      _defineProperty(this, \"data\", {});\n      _defineProperty(this, \"routeState\", void 0);\n      _defineProperty(this, \"followerModel\", void 0);\n      _defineProperty(this, \"decodedToken\", void 0);\n      _defineProperty(this, \"followerId\", void 0);\n      _defineProperty(this, \"followeeId\", void 0);\n      _defineProperty(this, \"followBtnText\", \"follow\");\n      this.router = router;\n      this.noteService = noteService;\n      this.profileService = profileService;\n      this.followService = followService;\n      console.log(\"state : \" + this.router.getCurrentNavigation()?.extras?.state?.redirect);\n      this.searchKeyword = this.router.getCurrentNavigation()?.extras?.state?.redirect;\n    }\n    ngOnInit() {\n      //  const {redirect} = this.router.getCurrentNavigation()?.extras?.state?.redirect;\n      //  this.tag.tag = redirect;\n      this.noteService.getNotesByTag(this.searchKeyword).subscribe(result => {\n        this.searchedTag = result;\n        // this.searchedTag.notes.forEach(note => {\n        //   console.log(\"mainphotoURL:  \" + note.mainPhotourl);\n        // });\n        // for(var note in this.searchedTag.notes){\n        //     console.log(\"this.tagList[tag] :  \" + this.searchedTag.notes[note].mainPhotourl );\n        // }\n      }, error => {\n        console.log('çalışmadı');\n      });\n    }\n    searchNote() {\n      this.noteService.getNotesByTag(this.searchKeyword).subscribe(result => {\n        this.searchedTag = result;\n        console.log(\"searchNote worked!!\");\n      }, error => {\n        console.log('çalışmadı');\n      });\n    }\n    searchPeople() {\n      let token = localStorage.getItem('token');\n      this.decodedToken = this.jwtHelper.decodeToken(token);\n      this.followerId = this.decodedToken.nameid;\n      let params = new HttpParams().set(\"searchKeyword\", this.searchKeyword).set(\"followerId\", this.followerId);\n      this.profileService.getSearchedUsers(params).subscribe(result => {\n        // followeeId\n        this.searchedPeople = result;\n        console.log(\"\");\n        this.searchedPeople.forEach(element => {\n          console.log(\" following info about \" + element.username + \" is \" + element.isFollowed);\n          if (element.isFollowed == true) element.followInfo = \"unfollow\";else element.followInfo = \"follow\";\n        });\n        //  for (let index = 0; index < this.searchedPeople.length; index++) {\n        //   const element = this.searchedPeople[index].isfollowed;\n        //  }\n        //  this.followService.getFollowInfo().subscribe(\n        //  (result : any) => {\n        //  });\n        // for (let index = 0; index < array.length; index++) {\n        //   const element = array[index];\n        // }\n      }, error => {\n        console.log('profileService getUsers doesnt work');\n      });\n    }\n    selectedTabChange(changeEvent) {\n      console.log('Index of tab : ' + changeEvent.index);\n      if (changeEvent.index == 0) {\n        this.searchNote();\n      } else {\n        this.searchPeople();\n      }\n    }\n    getDecodedAccessToken(token) {\n      try {\n        return jwt_decode(token);\n      } catch (error) {\n        return null;\n      }\n    }\n    FollowWriter(element, item) {\n      //getting user info\n      let token = localStorage.getItem('token');\n      this.decodedToken = this.jwtHelper.decodeToken(token);\n      this.followerId = this.decodedToken.nameid;\n      this.followerModel = {\n        followerId: this.followerId,\n        // getting id about followee\n        followeeId: item\n      };\n      console.log(\"followerID \" + this.followerId + \"followeeID \" + item);\n      if (element.innerText == 'follow') {\n        console.log(\"innerhtml is ok\");\n        this.followService.followWriter(this.followerModel).subscribe(result => {\n          console.log(\"followservice is ok for unfollow\");\n          if (result === 1) {\n            console.log(\"followservice is worked with 1\");\n            element.innerText = \"unfollow\";\n            // this.isFollow  = !this.isFollow;\n          }\n        }, error => console.log(\"followriter func not worked..\"));\n      }\n      if (element.innerText == 'unfollow') {\n        console.log(\"innerhtml is ok for unfollow\");\n        this.followService.unfollowWriter(this.followerModel).subscribe(result => {\n          if (result === 1) {\n            element.innerText = \"follow\";\n            // this.isFollow  = !this.isFollow;\n          }\n        }, error => console.log(\"unfollowriter func not worked..\"));\n      }\n    }\n  }\n  _defineProperty(SearchednotesComponent, \"\\u0275fac\", function SearchednotesComponent_Factory(t) {\n    return new (t || SearchednotesComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.NoteService), i0.ɵɵdirectiveInject(i3.ProfileService), i0.ɵɵdirectiveInject(i4.FollowService));\n  });\n  _defineProperty(SearchednotesComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SearchednotesComponent,\n    selectors: [[\"app-searchednotes\"]],\n    decls: 14,\n    vars: 3,\n    consts: [[1, \"wrapper\"], [1, \"label\"], [1, \"searchBarr\"], [\"id\", \"searchQueryInput\", \"type\", \"text\", \"name\", \"searchQueryInput\", \"placeholder\", \"Search\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"searchQuerySubmit\", \"type\", \"submit\", \"name\", \"searchQuerySubmit\"], [\"viewBox\", \"0 0 24 24\", 2, \"width\", \"24px\", \"height\", \"24px\"], [\"fill\", \"#666666\", \"d\", \"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\"], [3, \"selectedTabChange\"], [\"label\", \"Tags\"], [\"class\", \"row\", \"style\", \"padding-bottom: 10px\", 4, \"ngFor\", \"ngForOf\"], [\"label\", \"People\"], [1, \"row\", 2, \"padding-bottom\", \"10px\"], [1, \"col-lg-3\"], [\"routerLinkActive\", \"active\", 1, \"aaa\", 3, \"src\", \"alt\", \"routerLink\"], [1, \"mask\", \"rgba-white-slight\"], [1, \"col-lg-9\"], [\"routerLinkActive\", \"active\", 1, \"font-weight-bold\", \"mb-3\", 3, \"routerLink\"], [2, \"font-size\", \"13px\"], [\"routerLinkActive\", \"active\", 3, \"routerLink\"], [1, \"d-flex\", \"justify-content-between\"], [3, \"routerLink\"], [1, \"aaa\", 3, \"src\", \"alt\"], [\"mat-button\", \"\", 1, \"text-right\", 3, \"click\"]],\n    template: function SearchednotesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2, \"Submit your search\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function SearchednotesComponent_Template_input_ngModelChange_4_listener($event) {\n          return ctx.searchKeyword = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 4);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(6, \"svg\", 5);\n        i0.ɵɵelement(7, \"path\", 6);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelement(8, \"br\");\n        i0.ɵɵelementStart(9, \"mat-tab-group\", 7);\n        i0.ɵɵlistener(\"selectedTabChange\", function SearchednotesComponent_Template_mat_tab_group_selectedTabChange_9_listener($event) {\n          return ctx.selectedTabChange($event);\n        });\n        i0.ɵɵelementStart(10, \"mat-tab\", 8);\n        i0.ɵɵtemplate(11, SearchednotesComponent_div_11_Template, 21, 21, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"mat-tab\", 10);\n        i0.ɵɵtemplate(13, SearchednotesComponent_div_13_Template, 16, 5, \"div\", 9);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchKeyword);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.searchedTag);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.searchedPeople);\n      }\n    },\n    styles: [\"div[_ngcontent-%COMP%]{border-color:#fff;text-align:left;cursor:pointer}img[_ngcontent-%COMP%]{object-fit:cover;object-position:center;height:auto;width:95%;border:0}.aaa[_ngcontent-%COMP%]:hover{opacity:.8}mat-form-field[_ngcontent-%COMP%]{width:60%;height:10%}.searchBar[_ngcontent-%COMP%]{text-align:center}body[_ngcontent-%COMP%]{font-family:Roboto,Arial,sans-serif}.wrapper[_ngcontent-%COMP%]{width:100%;max-width:31.25rem;margin:6rem auto}.label[_ngcontent-%COMP%]{font-size:.625rem;font-weight:400;text-transform:uppercase;letter-spacing:+1.3px;margin-bottom:1rem}.searchBarr[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center}#searchQueryInput[_ngcontent-%COMP%]{width:100%;height:2.8rem;background:#f5f5f5;outline:none;border:none;border-radius:1.625rem;padding:0 3.5rem 0 1.5rem;font-size:1rem}#searchQuerySubmit[_ngcontent-%COMP%]{width:3.5rem;height:2.8rem;margin-left:-3.5rem;background:none;border:none;outline:none}#searchQuerySubmit[_ngcontent-%COMP%]:hover{cursor:pointer}\"]\n  }));\n  return SearchednotesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}